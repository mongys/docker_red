1. Октябрь 2024:

Начал изучение FastAPI, уделив внимание различным архитектурным паттернам, таким как Factory, Builder, Service и другие. Для текущего проекта был выбран паттерн Repository, так как он лучше всего соответствовал требованиям. На этапе проектирования возник вопрос о делении приложения на слои. Первоначально не планировалось создание слоя Domain layer, однако после анализа будущих перспектив (например, добавление управления не только Docker-контейнерами, но и Kubernetes) было решено внедрить этот слой. Это позволило обеспечить возможность лёгкой интеграции дополнительных реализаций репозиториев в будущем.

В результате приложение было разделено на четыре слоя:
- Application layer — слой, отвечающий за оркестрацию бизнес-логики и пользовательских сценариев.
- Domain layer — слой, содержащий основные бизнес-модели и правила.
- Infrastructure layer — слой для реализации взаимодействия с внешними системами (например, базы данных, API Docker).
- Presentation layer — слой для обработки запросов и возврата ответов через API.

После проектирования структуры был создан шаблон приложения, включающий слои, подключение к базе данных, настройки (конфиги), а также README-файл.



2. Ноябрь 2024:

На этом этапе, из-за недостаточного понимания принципов разделения приложения на слои, возникали ошибки, связанные с размещением кода не в тех слоях, где это требовалось. Однако постепенно такие проблемы удавалось решать. 

Особое внимание было уделено обработке исключений и их корректному поднятию, что стало одним из первых вызовов. В течение месяца была реализована базовая логика работы с Docker-контейнерами. Также началась разработка зависимостей, их настройка и интеграция с API. Были созданы первые эндпоинты и начата обработка различных вариантов ошибок и исключений. Особых сложностей на этом этапе не возникло, что позволило достичь значительного прогресса в написании API.



3. Декабрь 2024:

Этот месяц стал наиболее сложным этапом разработки. Работа началась с добавления функционала для управления пользователями в базе данных и реализации механизма авторизации. Было настроено использование зависимостей для передачи данных между слоями и обеспечения доступа к эндпоинтам API.

Следующим шагом стала реализация системы двойных токенов. Сначала возникли трудности с пониманием принципов работы этого механизма, а затем с выбором подходов для хранения токенов. В результате были выбраны access и refresh токены, которые хранятся в cookies и извлекаются из них. Реализация включала написание соответствующих эндпоинтов и логики работы токенов.

Отдельным вызовом стало решение вопроса о том, как лучше обновлять access-токен: через эндпоинт или через middleware. После изучения вопроса было принято решение реализовать обновление через отдельный эндпоинт, что обеспечило большую гибкость и прозрачность. В итоге работа над API была завершена.